import streamlit as st
import streamlit.components.v1 as components

# ===========================
# –ù–ê–°–¢–†–û–ô–ö–ê –°–¢–†–ê–ù–ò–¶–´
# ===========================
st.set_page_config(
    page_title="–•–∏–º–∏—è 10 ‚Äî –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è",
    layout="wide"
)

# =========================================================
# 1) –ò–ù–¢–ï–†–ê–ö–¢–ò–í–ù–ê–Ø –ê–ù–ò–ú–ê–¶–ò–Ø –ü–†–û–ë–ò–†–û–ö (–ù–ï GIF!)
# =========================================================
def interactive_tubes(reaction_text, color):
    html_code = f"""
    <html>
    <head>
    <style>
    .container {{
        text-align: center;
        width: 100%;
    }}

    .tubes {{
        display: flex;
        justify-content: center;
        gap: 70px;
        margin-bottom: 20px;
    }}

    .tube {{
        width: 45px;
        height: 150px;
        border: 3px solid black;
        border-radius: 0 0 18px 18px;
        background: linear-gradient(to top, #4fc3f7 0%, #e3f2fd 70%);
        transition: transform 1s;
    }}

    .center {{
        background: linear-gradient(to top, #ffcc80 0%, #fff3e0 70%);
        transition: background 1.5s;
    }}

    .pour-left {{ transform: rotate(25deg) translateX(10px); }}
    .pour-right {{ transform: rotate(-25deg) translateX(-10px); }}

    .buttons {{
        margin-top: 10px;
    }}

    .result {{
        padding: 15px;
        border-radius: 12px;
        background: {color};
        font-size: 20px;
        font-weight: bold;
        margin-top: 15px;
        display: none;
        max-width: 700px;
        margin-left: auto;
        margin-right: auto;
    }}
    </style>
    </head>

    <body>
    <div class="container">

        <h3>üß™ –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è</h3>

        <div class="tubes">
            <div id="left" class="tube"></div>
            <div id="center" class="tube center"></div>
            <div id="right" class="tube"></div>
        </div>

        <div class="buttons">
            <button onclick="pour()">‚ñ∂Ô∏è –ù–∞—á–∞—Ç—å –ø–µ—Ä–µ–ª–∏–≤–∞–Ω–∏–µ</button>
            <button onclick="showResult()">üî¨ –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∞–∫—Ü–∏—é</button>
        </div>

        <div id="res" class="result">{reaction_text}</div>

    </div>

    <script>
    function pour() {{
        document.getElementById("left").classList.toggle("pour-left");
        document.getElementById("right").classList.toggle("pour-right");
    }}

    function showResult() {{
        document.getElementById("center").style.background =
            "linear-gradient(to top, {color} 0%, #ffffff 70%)";

        document.getElementById("res").style.display = "block";
    }}
    </script>
    </body>
    </html>
    """
    components.html(html_code, height=380)

# =========================================================
# 2) –†–ï–ê–ö–¶–ò–ò –î–õ–Ø –í–°–ï–• 19 –£–†–û–ö–û–í
# =========================================================
REACTIONS = {
    1: ("–ú–µ—Ç–∞–Ω –ø—Ä–∏ –≥–æ—Ä–µ–Ω–∏–∏ –æ–±—Ä–∞–∑—É–µ—Ç CO‚ÇÇ ‚Üë", "#E8F8FF"),
    2: ("–ë—Ä–æ–º–Ω–∞—è –≤–æ–¥–∞ –æ–±–µ—Å—Ü–≤–µ—á–∏–≤–∞–µ—Ç—Å—è", "#C9F7C5"),
    3: ("–û–±—Ä–∞–∑—É–µ—Ç—Å—è –æ—Å–∞–¥–æ–∫ AgC‚â°CAg ‚Üì", "#FFF2CC"),
    4: ("–≠—Ç–∞–Ω–æ–ª –æ–∫–∏—Å–ª—è–µ—Ç—Å—è –¥–æ –∞–ª—å–¥–µ–≥–∏–¥–∞", "#E6FFE6"),
    5: ("–§–µ–Ω–æ–ª —Å FeCl‚ÇÉ –¥–∞—ë—Ç —Ñ–∏–æ–ª–µ—Ç–æ–≤—É—é –æ–∫—Ä–∞—Å–∫—É", "#E1BEE7"),
    6: ("–ê–ª—å–¥–µ–≥–∏–¥ –¥–∞—ë—Ç —Ä–µ–∞–∫—Ü–∏—é —Å–µ—Ä–µ–±—Ä—è–Ω–æ–≥–æ –∑–µ—Ä–∫–∞–ª–∞", "#FCE4EC"),
    7: ("–ö–µ—Ç–æ–Ω—ã –Ω–µ –¥–∞—é—Ç —Å–µ—Ä–µ–±—Ä—è–Ω–æ–≥–æ –∑–µ—Ä–∫–∞–ª–∞", "#E3F2FD"),
    8: ("–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∞–ª–∫–∞–Ω–æ–≤, –∞–ª–∫–µ–Ω–æ–≤ –∏ –∞–ª–∫–∏–Ω–æ–≤", "#FFFDE7"),
    9: ("–ö–∞—Ä–±–æ–Ω–æ–≤–∞—è –∫–∏—Å–ª–æ—Ç–∞ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç —Å –º–µ—Ç–∞–ª–ª–æ–º ‚Üí H‚ÇÇ ‚Üë", "#E0F7FA"),
    10: ("–û–±—Ä–∞–∑—É–µ—Ç—Å—è —Å–ª–æ–∂–Ω—ã–π —ç—Ñ–∏—Ä + –≤–æ–¥–∞", "#FFF3E0"),
    11: ("–ê–º–∏–Ω—ã –ø—Ä–æ—è–≤–ª—è—é—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞", "#E8F5E9"),
    12: ("–ê–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç—ã ‚Äî –∞–º—Ñ–æ—Ç–µ—Ä–Ω—ã–µ –≤–µ—â–µ—Å—Ç–≤–∞", "#F3E5F5"),
    13: ("–ì–∞–ª–æ–≥–µ–Ω–ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ –≤—Å—Ç—É–ø–∞—é—Ç –≤ –∑–∞–º–µ—â–µ–Ω–∏–µ", "#E1F5FE"),
    14: ("–ù–∏—Ç—Ä–æ—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è", "#FBE9E7"),
    15: ("–°—É–ª—å—Ñ–æ–∫–∏—Å–ª–æ—Ç—ã ‚Äî —Å–∏–ª—å–Ω—ã–µ –∫–∏—Å–ª–æ—Ç—ã", "#E0F2F1"),
    16: ("–ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ–∫–∏—Å–ª–µ–Ω–∏–µ –≤–µ—â–µ—Å—Ç–≤–∞", "#E8EAF6"),
    17: ("–†–µ–∞–∫—Ü–∏—è –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø–æ –¥–≤–æ–π–Ω–æ–π —Å–≤—è–∑–∏", "#FFF8E1"),
    18: ("–†–µ–∞–∫—Ü–∏—è –∑–∞–º–µ—â–µ–Ω–∏—è", "#E0F7FA"),
    19: ("–ü–æ–ª–∏–º–µ—Ä–∏–∑–∞—Ü–∏—è ‚Üí –¥–ª–∏–Ω–Ω—ã–µ —Ü–µ–ø–∏", "#FCE4EC"),
}

# =========================================================
# 3) –°–ü–ò–°–û–ö –£–†–û–ö–û–í (–ë–û–ö–û–í–ê–Ø –ü–ê–ù–ï–õ–¨)
# =========================================================
lessons = [
    "1-—Å–∞–±–∞“õ: –ê–ª–∫–∞–Ω–¥–∞—Ä",
    "2-—Å–∞–±–∞“õ: –ê–ª–∫–µ–Ω–¥–µ—Ä",
    "3-—Å–∞–±–∞“õ: –ê–ª–∫–∏–Ω–¥–µ—Ä",
    "4-—Å–∞–±–∞“õ: –°–ø–∏—Ä—Ç—Ç–µ—Ä",
    "5-—Å–∞–±–∞“õ: –§–µ–Ω–æ–ª–¥–∞—Ä",
    "6-—Å–∞–±–∞“õ: –ê–ª—å–¥–µ–≥–∏–¥—Ç–µ—Ä",
    "7-—Å–∞–±–∞“õ: –ö–µ—Ç–æ–Ω–¥–∞—Ä",
    "8-—Å–∞–±–∞“õ: –ö”©–º—ñ—Ä—Å—É—Ç–µ–∫—Ç–µ—Ä —Å–∞–ª—ã—Å—Ç—ã—Ä—É",
    "9-—Å–∞–±–∞“õ: –ö–∞—Ä–±–æ–Ω “õ—ã—à“õ—ã–ª–¥–∞—Ä—ã",
    "10-—Å–∞–±–∞“õ: –≠—Ñ–∏—Ä–ª–µ—Ä",
    "11-—Å–∞–±–∞“õ: –ê–º–∏–Ω–¥–∞—Ä",
    "12-—Å–∞–±–∞“õ: –ê–º–∏–Ω“õ—ã—à“õ—ã–ª–¥–∞—Ä",
    "13-—Å–∞–±–∞“õ: –ì–∞–ª–æ–≥–µ–Ω—Ç—É—ã–Ω–¥—ã–ª–∞—Ä",
    "14-—Å–∞–±–∞“õ: –ù–∏—Ç—Ä–æ—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–ª–∞—Ä",
    "15-—Å–∞–±–∞“õ: –°—É–ª—å—Ñ–æ–∫–∏—Å–ª–æ—Ç–∞–ª–∞—Ä",
    "16-—Å–∞–±–∞“õ: –¢–æ—Ç—ã“ì—É —Ä–µ–∞–∫—Ü–∏—è–ª–∞—Ä—ã",
    "17-—Å–∞–±–∞“õ: “ö–æ—Å—ã–ª—É —Ä–µ–∞–∫—Ü–∏—è–ª–∞—Ä—ã",
    "18-—Å–∞–±–∞“õ: –ê—É—ã—Å—Ç—ã—Ä—É —Ä–µ–∞–∫—Ü–∏—è–ª–∞—Ä—ã",
    "19-—Å–∞–±–∞“õ: –ü–æ–ª–∏–º–µ—Ä–ª–µ—É",
]

selected = st.sidebar.selectbox("üìò –°–∞–±–∞“õ—Ç—ã —Ç–∞“£–¥–∞“£—ã–∑:", lessons)
lesson_id = int(selected.split("-")[0])

st.title(f"üß™ {selected}")

# ---- –ü–û–ö–ê–ó–´–í–ê–ï–ú –ò–ù–¢–ï–†–ê–ö–¢–ò–í–ù–´–ï –ü–†–û–ë–ò–†–ö–ò ----
interactive_tubes(
    REACTIONS[lesson_id][0],
    REACTIONS[lesson_id][1]
)

st.markdown("---")

# =========================================================
# 4) –ë–õ–û–ö –î–õ–Ø –í–ê–®–ò–• –í–û–ü–†–û–°–û–í (–ù–ò–ß–ï–ì–û –ù–ï –£–î–ê–õ–Ø–ï–ú)
# =========================================================
st.subheader("üìö –¢–µ—Å—Ç–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã")

# üëâüëâüëâ –°–Æ–î–ê –í–°–¢–ê–í–¨–¢–ï –í–ê–®–ò –í–û–ü–†–û–°–´ –ö–ê–ö –ë–´–õ–ò
# –ù–∞–ø—Ä–∏–º–µ—Ä:

all_questions = {
    1: [
        {
            "question": "1. –ê–ª–∫–∞–Ω–¥–∞—Ä–¥—ã“£ –∂–∞–ª–ø—ã —Ñ–æ—Ä–º—É–ª–∞—Å—ã:",
            "options": ["A) CnH2n", "B) CnH2n+2", "C) CnH2n-2", "D) CnHn"],
            "correct": 1
        },
        {
            "question": "2. –ú–µ—Ç–∞–Ω –º–æ–ª–µ–∫—É–ª–∞—Å—ã–Ω—ã“£ –ø—ñ—à—ñ–Ω—ñ:",
            "options": ["A) –¢–µ—Ç—Ä–∞—ç–¥—Ä", "B) –ñ–∞–∑—ã“õ", "C) –°—ã–∑—ã“õ—Ç—ã", "D) –î”©“£–≥–µ–ª–µ–∫"],
            "correct": 0
        },
        # üëâ –∑–¥–µ—Å—å –≤—ã –≤—Å—Ç–∞–≤–∏—Ç–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ 8 –≤–æ–ø—Ä–æ—Å–æ–≤ —É—Ä–æ–∫–∞ 1
    ],

    # üëâ –∑–¥–µ—Å—å –≤—ã –≤—Å—Ç–∞–≤–∏—Ç–µ –≤–æ–ø—Ä–æ—Å—ã 2‚Äì19 —É—Ä–æ–∫–æ–≤ —Ç–æ—á–Ω–æ –∫–∞–∫ –≤ –≤–∞—à–µ–º —Ñ–∞–π–ª–µ
}

# =========================================================
# 5) –ú–ï–•–ê–ù–ò–ó–ú –¢–ï–°–¢–ê (–ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô)
# =========================================================
if lesson_id in all_questions:
    score = 0
    answers = []

    for i, q in enumerate(all_questions[lesson_id]):
        st.write(f"**{q['question']}**")
        ans = st.radio("", q["options"], key=f"{lesson_id}_{i}")
        answers.append(ans)

    if st.button("‚úÖ –¢–µ–∫—Å–µ—Ä—É"):
        for i, q in enumerate(all_questions[lesson_id]):
            if answers[i] == q["options"][q["correct"]]:
                score += 1

        st.success(f"üéØ –ù”ô—Ç–∏–∂–µ: {score} / 10")

        if score >= 8:
            st.balloons()

else:
    st.info("–ë“±–ª —Å–∞–±–∞“õ“õ–∞ —Å“±—Ä–∞“õ—Ç–∞—Ä–¥—ã ”©–∑ —Ñ–∞–π–ª—ã“£—ã–∑–¥–∞–Ω –æ—Å—ã–Ω–¥–∞ –∫”©—à—ñ—Ä—ñ–ø “õ–æ–π—ã“£—ã–∑.")
